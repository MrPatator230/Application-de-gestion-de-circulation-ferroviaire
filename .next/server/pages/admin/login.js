(()=>{var e={};e.id=567,e.ids=[220,567,636],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,l:()=>n});var s=r(8732),a=r(2015);let n=(0,a.createContext)(),i=({children:e})=>{let[t,r]=(0,a.useState)("Ma Soci\xe9t\xe9 Ferroviaire"),[i,o]=(0,a.useState)("Le transport ferroviaire simplifi\xe9"),[l,u]=(0,a.useState)("Description de la soci\xe9t\xe9 ferroviaire..."),[c,m]=(0,a.useState)("#007bff"),[d,p]=(0,a.useState)("#6c757d"),[S,g]=(0,a.useState)("Train Schedule Management");return(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/settings");if(e.ok){let t=await e.json();r(t.companyName||"Ma Soci\xe9t\xe9 Ferroviaire"),o(t.companySlogan||"Le transport ferroviaire simplifi\xe9"),u(t.companyDescription||"Description de la soci\xe9t\xe9 ferroviaire..."),m(t.primaryColor||"#007bff"),p(t.secondaryColor||"#6c757d"),g(t.appName||"Train Schedule Management")}}catch(e){console.error("Failed to fetch settings:",e)}}()},[]),(0,s.jsx)(n.Provider,{value:{companyName:t,setCompanyName:r,companySlogan:i,setCompanySlogan:o,companyDescription:l,setCompanyDescription:u,primaryColor:c,setPrimaryColor:m,secondaryColor:d,setSecondaryColor:p,appName:S,setAppName:g},children:e})}},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2768:()=>{},3673:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthContext:()=>m,default:()=>p});var s=r(8732);let a=require("styled-jsx/style");var n=r.n(a);r(5378),r(2768);var i=r(2015),o=r(4233),l=r(9788),u=r.n(l),c=r(468);let m=(0,i.createContext)();function d({children:e}){let{primaryColor:t,secondaryColor:r,appName:a}=(0,i.useContext)(c.l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n(),{id:"f1209dfa6dead71",dynamic:[t,r],children:`:root{--bs-primary:${t};--bs-secondary:${r}}`}),e]})}function p({Component:e,pageProps:t}){let[r,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)(null),p=(0,o.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u(),{children:[(0,s.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/startbootstrap-sb-admin-2@4.1.4/css/sb-admin-2.min.css",rel:"stylesheet"}),(0,s.jsx)("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css",rel:"stylesheet"})]}),(0,s.jsx)(m.Provider,{value:{isAuthenticated:r,role:n,login:(e,t)=>"admin"===e&&"admin"===t?(localStorage.setItem("authToken","dummy-token"),localStorage.setItem("userRole","admin"),localStorage.setItem("username",e),a(!0),l("admin"),p.push("/admin"),!0):!!JSON.parse(localStorage.getItem("users")||"[]").find(r=>r.username===e&&r.password===t)&&(localStorage.setItem("authToken","dummy-token"),localStorage.setItem("userRole","client"),localStorage.setItem("username",e),a(!0),l("client"),p.push("/client"),!0),logout:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("username"),a(!1),l(null),p.push("/login")},register:(e,t)=>{let r=JSON.parse(localStorage.getItem("users")||"[]");return!r.find(t=>t.username===e)&&(r.push({username:e,password:t}),localStorage.setItem("users",JSON.stringify(r)),localStorage.setItem("authToken","dummy-token"),localStorage.setItem("userRole","client"),localStorage.setItem("username",e),a(!0),l("client"),p.push("/client"),!0)}},children:(0,s.jsx)(c.Z,{children:(0,s.jsx)(d,{children:(0,s.jsx)(e,{...t})})})})]})}},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},7910:e=>{"use strict";e.exports=require("stream")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")},9944:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>x,default:()=>S,getServerSideProps:()=>f,getStaticPaths:()=>h,getStaticProps:()=>g,reportWebVitals:()=>v,routeModule:()=>A,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>M,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>P});var s={};r.r(s),r.d(s,{default:()=>p});var a=r(3885),n=r(237),i=r(1413),o=r(9616),l=r.n(o),u=r(3673),c=r(8732),m=r(2015),d=r(4233);function p(){let[e,t]=(0,m.useState)(""),[r,s]=(0,m.useState)(""),[a,n]=(0,m.useState)(""),{login:i,isAuthenticated:o,role:l}=(0,m.useContext)(u.AuthContext),p=(0,d.useRouter)();return o?("admin"===l?p.push("/admin"):"client"===l&&p.push("/client"),null):(0,c.jsxs)("div",{className:"container mt-5",children:[(0,c.jsx)("h1",{children:"Connexion"}),(0,c.jsxs)("form",{onSubmit:t=>{t.preventDefault(),i(e,r)||n("Nom d'utilisateur ou mot de passe incorrect")},style:{maxWidth:"400px"},children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"username",className:"form-label",children:"Nom d'utilisateur"}),(0,c.jsx)("input",{type:"text",className:"form-control",id:"username",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"password",className:"form-label",children:"Mot de passe"}),(0,c.jsx)("input",{type:"password",className:"form-control",id:"password",value:r,onChange:e=>s(e.target.value),required:!0})]}),a&&(0,c.jsx)("div",{className:"alert alert-danger",children:a}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Se connecter"})]})]})}let S=(0,i.M)(s,"default"),g=(0,i.M)(s,"getStaticProps"),h=(0,i.M)(s,"getStaticPaths"),f=(0,i.M)(s,"getServerSideProps"),x=(0,i.M)(s,"config"),v=(0,i.M)(s,"reportWebVitals"),P=(0,i.M)(s,"unstable_getStaticProps"),b=(0,i.M)(s,"unstable_getStaticPaths"),j=(0,i.M)(s,"unstable_getStaticParams"),y=(0,i.M)(s,"unstable_getServerProps"),M=(0,i.M)(s,"unstable_getServerSideProps"),A=new a.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/admin/login",pathname:"/admin/login",bundlePath:"",filename:""},components:{App:u.default,Document:l()},userland:s})}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[89,466,616],()=>r(9944));module.exports=s})();